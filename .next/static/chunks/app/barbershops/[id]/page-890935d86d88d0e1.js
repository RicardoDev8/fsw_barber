(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[408],{3995:function(e,s,a){Promise.resolve().then(a.bind(a,4562)),Promise.resolve().then(a.bind(a,1404))},4562:function(e,s,a){"use strict";a.r(s);var r=a(3827),t=a(3700),l=a(703),i=a(4960),c=a(9744),n=a(2457),d=a(5879),o=a(7907),m=a(1697),x=a(8904);s.default=e=>{let{barbershop:s}=e,a=(0,o.useRouter)();return(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"h-[250px] w-full relative",children:[(0,r.jsx)(t.z,{onClick:()=>{a.replace("/")},size:"icon",variant:"outline",className:"z-50 absolute top-2 left-2",children:(0,r.jsx)(i.Z,{})}),(0,r.jsxs)(m.yo,{children:[(0,r.jsx)(m.aM,{asChild:!0,children:(0,r.jsx)(t.z,{size:"icon",variant:"outline",className:"z-50 absolute top-2 right-2",children:(0,r.jsx)(c.Z,{})})}),(0,r.jsx)(m.ue,{className:"p-0",children:(0,r.jsx)(x.Z,{})})]}),(0,r.jsx)(l.default,{className:"opacity-75",src:s.imageUrl,fill:!0,alt:s.name,style:{objectFit:"cover"}})]}),(0,r.jsxs)("div",{className:"px-5 pt-3 pb-6 border-b border-solid border-secondary",children:[(0,r.jsx)("h1",{className:"text-xl font-bold",children:s.name}),(0,r.jsxs)("div",{className:"flex items-center gap-1 mt-2",children:[(0,r.jsx)(n.Z,{className:"text-primary",size:18}),(0,r.jsx)("p",{className:"text-sm",children:s.address})]}),(0,r.jsxs)("div",{className:"flex items-center gap-1 mt-2",children:[(0,r.jsx)(d.Z,{className:"text-primary",size:18}),(0,r.jsx)("p",{className:"text-sm",children:"5,0 (747 avalia\xe7\xf5es)"})]})]})]})}},1404:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return R}});var r=a(3827),t=a(3700),l=a(9555),i=a(1697),c=a(4090),n=a(9108),d=a(7805),o=a(6463),m=a(7901);function x(e){let{className:s,classNames:a,showOutsideDays:l=!0,...i}=e;return(0,r.jsx)(o._W,{showOutsideDays:l,className:(0,m.cn)("p-3",s),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:(0,m.cn)((0,t.d)({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:(0,m.cn)((0,t.d)({variant:"ghost"}),"h-9 w-9 p-0 font-normal aria-selected:opacity-100"),day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground opacity-50 aria-selected:bg-accent/50 aria-selected:text-muted-foreground aria-selected:opacity-30",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...a},components:{IconLeft:e=>{let{...s}=e;return(0,r.jsx)(n.Z,{className:"h-4 w-4"})},IconRight:e=>{let{...s}=e;return(0,r.jsx)(d.Z,{className:"h-4 w-4"})}},...i})}x.displayName="Calendar";var u=a(1126),h=a(703),f=a(458),p=a(4394),j=a(6581),b=a(5890),y=a(6721);a(5355);var N=a(3472),v=(0,N.$)("a771927b25a76e230d86fddc0bc2d52ca494bd3e"),g=a(8994),w=a(6288),_=a(7907),z=(0,N.$)("5cf1cbbe7355c0b8ed3b9adf2729567341217033"),C=a(3424),R=e=>{let{service:s,barbershop:a,isAuthenticated:n}=e,d=(0,_.useRouter)(),{data:o}=(0,u.useSession)(),[m,N]=(0,c.useState)(new Date),[R,k]=(0,c.useState)(),[F,M]=(0,c.useState)(!1),[Z,H]=(0,c.useState)(!1),[B,I]=(0,c.useState)([]);(0,c.useEffect)(()=>{m&&(async()=>{I(await z(a.id,m))})()},[m,a.id]);let S=e=>{k(e)},O=async()=>{M(!0);try{if(!m||!R||!(null==o?void 0:o.user))return;let e=Number(R.split(":")[0]),r=Number(R.split(":")[1]),t=(0,p.H)((0,j.B)(m,e),r);await v({serviceId:s.id,barbershopId:a.id,date:t,userId:o.user.id}),H(!1),k(void 0),N(void 0),(0,w.A)("Reserva realizada com sucesso!",{description:(0,b.WU)(t,"'Para' dd 'de' MMMM '\xe0s' HH':'mm'.'",{locale:f.F}),action:{label:"Visualizar",onClick:()=>d.push("/bookings")}})}catch(e){console.log(e)}finally{M(!1)}},U=async()=>{if(!n)return await (0,u.signIn)("google")},W=(0,c.useMemo)(()=>m?(function(e){let s=(0,p.H)((0,j.B)(e,9),0),a=(0,p.H)((0,j.B)(e,21),0),r=[],t=s;for(;t<=a;)r.push((0,b.WU)(t,"HH:mm")),t=(0,y.m)(t,45);return r})(m).filter(e=>{let s=Number(e.split(":")[0]),a=Number(e.split(":")[1]);return!B.find(e=>{let r=e.date.getHours(),t=e.date.getMinutes();return r===s&&t===a})}):[],[m,B]);return(0,r.jsx)(l.Zb,{children:(0,r.jsx)(l.aY,{className:"p-3",children:(0,r.jsxs)("div",{className:"flex gap-4 items-center",children:[(0,r.jsx)("div",{className:"relative min-h-[110px] min-w-[110px] max-h-[110px] max-w-[110px]",children:(0,r.jsx)(h.default,{className:"rounded-lg",src:s.imageUrl,fill:!0,style:{objectFit:"contain"},alt:s.name})}),(0,r.jsxs)("div",{className:"flex flex-col w-full ",children:[(0,r.jsx)("h2",{className:"font-bold",children:s.name}),(0,r.jsx)("p",{className:"text-sm text-gray-400",children:s.description}),(0,r.jsxs)("div",{className:"flex items-center justify-between mt-3",children:[(0,r.jsx)("p",{className:"text-primary text-sm font-bold",children:Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(Number(s.price))}),(0,r.jsxs)(i.yo,{open:Z,onOpenChange:H,children:[(0,r.jsx)(i.aM,{asChild:!0,children:(0,r.jsx)(t.z,{variant:"secondary",children:"Reservar"})}),(0,r.jsxs)(i.ue,{className:"",children:[(0,r.jsx)(i.Tu,{className:"text-left px-5 py-6 border-b border-solid border-secondary",children:(0,r.jsx)(i.bC,{children:"Fazer Reserva"})}),(0,r.jsx)("div",{className:"py-6",children:(0,r.jsx)(x,{mode:"single",selected:m,onSelect:e=>{N(e),k(void 0)},locale:f.F,styles:{caption:{textTransform:"capitalize"}}})}),m&&(0,r.jsx)("div",{className:"flex gap-3 overflow-x-auto py-6 px-5 border-y border-solid border-secondary [&::-webkit-scrollbar]:hidden",children:W.map(e=>(0,r.jsx)(t.z,{onClick:()=>S(e),variant:R===e?"default":"outline",className:"rounded-full",children:e},e))}),(0,r.jsx)("div",{className:"py-6 px-5 border-t border-solid border-secondary",children:(0,r.jsx)(l.Zb,{children:(0,r.jsxs)(l.aY,{className:"p-3 gap-3 flex flex-col",children:[(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("h2",{className:"font-bold",children:s.name}),(0,r.jsx)("h3",{className:"text-primary text-sm font-bold",children:Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(Number(s.price))})]}),m&&(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("h3",{className:"text-gray-400 text-sm",children:"Data"}),(0,r.jsx)("h4",{className:"text-sm",children:(0,b.WU)(m,"dd 'de' MMMM",{locale:f.F})})]}),R&&(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("h3",{className:"text-gray-400 text-sm",children:"Hor\xe1rio"}),(0,r.jsx)("h4",{className:"text-sm",children:R})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("h3",{className:"text-gray-400 text-sm",children:"Barbearia"}),(0,r.jsx)("h4",{className:"text-sm",children:a.name})]})]})})}),(0,r.jsx)(i.FF,{className:"px-5",children:n?(0,r.jsxs)(t.z,{onClick:O,disabled:!R||F,className:"w-full",children:[F&&(0,r.jsx)(g.Z,{className:"mr-2 h-4 w-4 animate-spin"}),"Confirmar Reserva"]}):(0,r.jsxs)(C.aR,{children:[(0,r.jsx)(C.vW,{children:(0,r.jsxs)(t.z,{onClick:O,disabled:!R||F,className:"w-full",children:[F&&(0,r.jsx)(g.Z,{className:"mr-2 h-4 w-4 animate-spin"}),"Confirmar Reserva"]})}),(0,r.jsxs)(C._T,{className:"w-[90%]",children:[(0,r.jsxs)(C.fY,{children:[(0,r.jsx)(C.f$,{children:"Fa\xe7a login para reservar"}),(0,r.jsx)(C.yT,{children:"Voc\xea precisa fazer login para fazer sua reserva"})]}),(0,r.jsxs)(C.xo,{className:"flex-row gap-3",children:[(0,r.jsx)(C.le,{className:"w-full mt-0",children:"Voltar"}),(0,r.jsxs)(C.OL,{className:"w-full",onClick:U,children:[F&&(0,r.jsx)(g.Z,{className:"mr-2 h-4 w-4 animate-spin"}),"Fazer login"]})]})]})]})})]})]})]})]})]})})})}}},function(e){e.O(0,[936,344,921,951,885,971,69,744],function(){return e(e.s=3995)}),_N_E=e.O()}]);